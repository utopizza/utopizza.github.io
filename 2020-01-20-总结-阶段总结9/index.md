# 阶段总结(9)



上一次写阶段总结是2019年6月，6月底毕业搬回家后，在家呆了两周不到，7月10日就来深圳入职了。从7月入职到现在2020年1月，已过去了6个月的试用期并且顺利转正。现对这半年试用期做个简要的总结。

2019年7月

系统里定的7月10号报到入职，因此在家里只呆了不到两周就上深圳了。刚入职就遇到团建——东西冲穿越，不知道是暴晒的原因还是过度运动的原因，回来竟然发烧、鼻炎复发。先后看了两次医生，做了鼻镜检查，浪费了不少时间，不过还好没事。并进行了安全域串讲，没过。这次串讲最大的问题是我没有了解清楚串讲的内容需求，我以为只要讲清楚策略审计模块就行，结果被说没有完整介绍安全域。还要讲清楚数据从页面、采集端、计算、存储、再到页面展示这一整个过程，感觉这两周时间全部弄清楚还是有点难度。总结了几点：

- 对安全域认识的广度和深度都不够，首先需要弄懂产品定位，从一个俯瞰的角度来看整个产品，有一个全局的认识。例如说，为什么需要安全域，因为公司拥有大量的高价值数据，需要保护这些核心数据不被泄露或盗窃，那么就行需要为数据划定安全的边界，这就是『域』的意义由来。安全域是在公司有了BILS和BAAS这两套基础系统之后为了更进一步保护公司核心数据，然后在其基础上搭建的。还有一个问题就是我今天只讲了安全域的感知和审计功能，漏掉了阻断功能，后面需要补充
- 应该注重细节。要弄清楚数据从被采集到的那一刻开始，从到被传输、被流式处理、落地到数据库、被分析计算、最后到呈现在Web页面上，每一步是怎么走的。反过来从用户提交一个数据或者在Web的一个操作，到数据是怎么被系统接受，下发给各种agent，对系统产生什么影响，也要讲清楚。而我今天没有做好这一点
- 在阅读代码的时候应该多思考，为什么这样设计，分别有什么好处和不足之处，为什么要这样tradeoff，等等。同时应该善于总结，抽象出一个个的pattern，为以后面对类似的设计问题时都会非常有帮助
- 要多考虑工程上的特殊情况，例如服务器宕机了对系统有什么影响，丢失的数据能重现吗，定时任务执行太久导致新来的任务和旧的任务都来不及执行怎么办，什么时候使用反射什么时候使用工厂等等
- 阅读代码需要理解到可以动手改代码，对代码进行优化或者重构的程度，才能说是真正理解了代码

2019年8月

8月分主要是在弄入职后第一个研发issue，账单分摊系统GianoBills。第一次进行了详细设计评审，结果不理想。评审后开始研发，到月底都基本就是在进行编码实现，其中被日志模块坑了很久。一直没有弄清楚日志模块，导致错误的设计、错误的编码、卡住了很多进度。总结以下几点：

- 进行详细设计讲解、技术分享等等之前，最好先自己演练几次，把握一下时间，时间应该多准备几个版本，例如5分钟版本、15分钟版本、30分钟版本等
- 应该注意抓整体，先讲整体的思路、流程、架构，让大家有一个整体的认识，再根据时间是否允许来一步步展开细节，不要过早陷入太多detail
- 应该突出主要的一些设计亮点、要点，如果只有平铺直叙是无法吸引大家的注意和兴趣的
- 在实现一个功能之前，应该先看看目前业界是怎么实现的，有哪些优秀的设计方案，成熟的设计是怎么做的
- 一定要看官方文档，按照正确的方式来使用API，不要想当然，例如生成多个logger对象这样愚蠢的想法

2019年9月

9月份主要是在进行docker的虚拟化实现，因为没有接触过docker，学习了好一段时间。把账单分摊系统打包进docker的时候遇到了很多配置环境的坑，拖了很久。9月份还做了把crate接入安全域的工作，以及试写Giano SDK接入、安全域运营后台、flume维护等，都是比较杂的小任务。

2019年10月

10月份主要在虚拟化galaxy  storm集群，迁移到公司的paas化平台Opera。先是要充分了解storm，所以花了比较多时间看storm的官方文档，在自己笔记本搭建虚拟机集群然后部署storm集群。然后是弄清楚galaxy  storm上运行的topology，花了很多时间。加上国庆放假，回来后开始迁移工作。迁移过程实在太多坑太艰辛了，18号周五还莫名其妙弄崩了storm集群，要周围很多同事一起来重新提交所有job，感觉十分愧疚。回来在自己笔记本上想复现那个故障，但是却运行得好好的，完全没有问题，真是郁闷到爆炸。后来查了很多资料发现，故障原因是我搭建线下的storm测试集群时，使用了和线上集群同一个zookeeper，但是因为这个storm版本太老还不支持多个nimbus同时运行，然后两个集群都直接崩。就这样躺了版本过旧的坑（这个坑在高版本的storm中被修复了）。月底重新串讲了安全域，因为准备了好久，得到了组内的一致高度肯定和赞扬。

2019年11月

11月份主要是在做BILS故障查询系统GianoCheck。Leader让我用golang来实现一个http server，于是我抽了一个周末的时间学习golang，然后一周内基本就完成了这个任务，这个速度得到了大家的好评。产品体验也得到相关用户的高度评价。第一次在入职后体验到了一些小成就感。另外还做了黄金眼的串讲、一些线上服务的bug定位，安全域运营后台的优化等等。

2019年12月

12月份主要在做一些述职的准备工作，其余时间是日常的运维。由于10月paas化spe-storm后，有很多遗留问题，因此经过详细的讨论后，决定对spe进行优化，用原生storm重写spe，聚合相同的审计任务，把130个审计任务压缩成4个通用任务，优化后单域任务启动耗时从1个小时缩减到3秒以内，机器资源需求数量从30台缩减到5台，优化效果相当明显。这次对原有复杂系统的重构优化，确实从中学到很多东西，比如storm上的分布式任务编程、多节点选主、缓存实时刷新、读写冲突、流式数据批量写库提高吞吐等等。

2020年1月

1月10日顺利转正，总算熬过了试用期。1月份应该也是主要在研发SPE优化项目，以及一些日常运维。

二、后续计划

最近想了下，工作之余应该有自己的学习计划和安排，否则会浪费很多时间。因此制作个最近的一些学习小目标吧：

  1. 代码规范：这是工程师的最基本素养（python已看，java未看）
  2. 多看代码，总结设计模式：同为最基本素养之一
  3. 学习大数据组件：hadoop，spark，storm，kafka，zookeeper，flume，thrift，protobuf
  4. 学习虚拟化组件：docker，k8s
  5. 学会使用上述组件之后，进行源码学习，尝试在git中进行contribute，争取被accept
  6. leetcode要重新开始刷，每天至少一道到两道
  7. 学有余力的话，学习新语言：mapreduce，storm topology，golang
  8. 英语单词落下一段时间了，要重启百词斩和听力练习了
  9. 关注下hk的实验室和团队，还有research方向
  10. 坚持锻炼身体

